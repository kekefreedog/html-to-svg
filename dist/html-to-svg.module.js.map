{"version":3,"file":"html-to-svg.module.js","sources":["../src/utils/dom-walk.js","../src/utils/dom-get-zindex.js","../src/utils/dom-render-svg.js","../src/renderers/div.js","../src/renderers/svg.js","../src/renderers/text.js","../src/renderers/canvas.js","../src/renderers/image.js","../src/index.js","../src/utils/range-get-client-rects.js"],"sourcesContent":["async function walk (element, callback, { sort = () => 1 } = {}) {\n  if (!await callback(element)) return\n\n  for (const child of Array.from(element.children).sort(sort)) {\n    await walk(child, callback, { sort })\n  }\n}\n\nexport default walk\n","export default el => {\n  const zindex = window.getComputedStyle(el).getPropertyValue('z-index')\n  return zindex === 'auto' ? 0 : parseInt(zindex ?? 0)\n}\n","export default function (name, props = {}, parent) {\n  const NS = 'http://www.w3.org/2000/svg'\n\n  const element = document.createElementNS(NS, name)\n  if (name === 'svg') element.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', NS)\n  for (const key in props) {\n    if (props[key] === null || props[key] === undefined) continue\n    element.setAttribute(key, props[key])\n  }\n\n  if (parent) parent.appendChild(element)\n  return element\n}\n","import $ from '../utils/dom-render-svg'\n\nfunction isTransparent (color) {\n  if (!color || color === 'none' || color === 'transparent') return true\n\n  if (color.startsWith('rgba')) {\n    const rgba = color.match(/[\\d.]+/g)\n    if (rgba[3] === '0') return true\n  }\n\n  return false\n}\n\nexport default ({\n  debug,\n  fonts\n}) => async (element, { x, y, width, height, style }) => {\n  if (!width || !height) return\n\n  // TODO background-image\n  const backgroundColor = style.getPropertyValue('background-color')\n\n  // Skip visually empty blocks\n  if (isTransparent(backgroundColor)) return\n\n  // TODO SVG stroke is drawn on center, CSS stroke is drawn on outside\n  // TODO border-top|bottom|left|right\n  // TODO stroke-style\n  const stroke = {\n    stroke: 'none',\n    'stroke-width': 1\n  }\n  const borderColor = style.getPropertyValue('border-color')\n  const borderStyle = style.getPropertyValue('border-style')\n  if (borderStyle !== 'none' && !isTransparent(borderColor)) {\n    stroke.stroke = borderColor\n    stroke['stroke-width'] = style.getPropertyValue('border-width')\n  }\n\n  return $('rect', {\n    x,\n    y,\n    width,\n    height,\n    ...stroke,\n    fill: backgroundColor,\n    rx: parseInt(style.getPropertyValue('border-radius')) || null\n  })\n}\n","/* global FileReader, XMLSerializer, btoa, XMLHttpRequest */\nimport $ from '../utils/dom-render-svg'\n\nexport default ({ cache }) => async (element, { x, y, width, height, style }, {\n  rasterizeNestedSVG = true\n} = {}) => {\n  // Convert all image to dataURL to maximizime compatibility\n  for (const image of element.querySelectorAll('image[href]')) {\n    const src = image.getAttribute('href')\n\n    if (!cache.has(src)) {\n      // Fetch blob from image src\n      const blob = await new Promise(resolve => {\n        const request = new XMLHttpRequest()\n        request.open('GET', src, true)\n        request.responseType = 'blob'\n        request.onload = () => resolve(request.response)\n        request.send()\n      })\n\n      // Convert blob to dataURL using the FileReader API\n      const dataURL = await new Promise(resolve => {\n        const reader = new FileReader()\n        reader.onload = e => resolve(e.target.result)\n        reader.readAsDataURL(blob)\n      })\n\n      // Cache dataURL\n      cache.set(src, dataURL)\n    }\n\n    image.setAttribute('href', cache.get(src))\n  }\n\n  return rasterizeNestedSVG\n    ? $('image', {\n      x,\n      y,\n      width,\n      height,\n      href: 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(element))\n    })\n    : (() => {\n        const svg = $('svg', {\n          x,\n          y,\n          width,\n          height,\n          viewbox: `0 0 ${width} ${height}`\n        })\n\n        svg.innerHTML = element.innerHTML\n        return svg\n      })()\n}\n","import $ from '../utils/dom-render-svg'\n\nconst matchFont = s => ({ family, style = 'normal', weight = '400' } = {}) =>\n  family === (s.getPropertyValue('font-family') ?? '').replace(/['\"]/g, '').replace('Open Sans', 'Helvetica') &&\n    style === (s.getPropertyValue('font-style') ?? 'normal') &&\n    weight === (s.getPropertyValue('font-weight') ?? '400')\n\nexport default ({ debug, fonts }) => async (string, { x, y, width, height, style }, {\n  splitText = false\n}) => {\n  if (!string) return\n\n  const g = $('g', { class: 'text-fragment' })\n\n  // Find font\n  const font = fonts.find(matchFont(style))\n  if (!font) throw new Error(`Cannot find font '${style.getPropertyValue('font-family').replace('Open Sans', 'Helvetica')} ${style.getPropertyValue('font-style')} ${style.getPropertyValue('font-weight')}'`)\n\n  // Extract font metrics\n  const { unitsPerEm } = font.opentype\n  const ascender = font.opentype.tables.hhea.ascender\n  const descender = font.opentype.tables.hhea.descender\n\n  // Extract CSS props\n  const letterSpacing = style.getPropertyValue('letter-spacing')\n  const fontSize = parseFloat(style.getPropertyValue('font-size'))\n  const fill = style.getPropertyValue('color')\n\n  // Compute metrics\n  const lineBox = (ascender - descender) / unitsPerEm\n  const leading = (fontSize * lineBox) - Math.abs(descender / unitsPerEm) * fontSize\n\n  // Render various metrics for debug\n  line('start', 0, { orientation: 'vertical', stroke: 'red' })\n  line('end', width, { orientation: 'vertical', stroke: 'red' })\n  line('leading', leading, { stroke: '#4b96ff' })\n\n  // Extract CSS props\n\n  // Create a <text> element instead of vectorizing the text\n  const textElement = $('text', {\n    x: x,\n    y: y + leading,\n    fill: fill,\n    'font-family': style.getPropertyValue('font-family').replace(/['\"]/g, '').replace('Open Sans', 'Helvetica'), // Remove quotes\n    'font-size': fontSize,\n    'font-weight': style.getPropertyValue('font-weight'),\n    'font-style': style.getPropertyValue('font-style'),\n    'letter-spacing': letterSpacing === 'normal' ? '0' : letterSpacing,\n    'dominant-baseline': 'auto' // Adjust to align text correctly\n  }, g)\n\n  textElement.textContent = string\n\n  return g\n\n  function line (title, v, { orientation = 'horizontal', stroke = 'black' } = {}) {\n    return debug && $('line', {\n      title,\n      'data-value': v,\n      x1: orientation === 'horizontal' ? x : x + v,\n      x2: orientation === 'horizontal' ? x + width : x + v,\n      y1: orientation === 'horizontal' ? y + v : y,\n      y2: orientation === 'horizontal' ? y + v : y + height,\n      stroke,\n      class: 'debug'\n    }, g)\n  }\n}\n","import $ from '../utils/dom-render-svg'\n\nexport default ({\n  debug,\n  fonts\n}) => async (element, { x, y, width, height, style }) => $('image', {\n  x,\n  y,\n  width,\n  height,\n  href: element.toDataURL('image/png')\n})\n","import $ from '../utils/dom-render-svg'\n\nexport default ({\n  debug,\n  fonts\n}) => async (element, { x, y, width, height, style }) => {\n  if (!width || !height) return\n  if (!element.src) return\n\n  return $('image', {\n    x,\n    y,\n    width,\n    height,\n    href: element.src\n  })\n}\n","/* global Node */\nimport Opentype from 'opentype.js'\nimport walk from './utils/dom-walk'\nimport getZIndex from './utils/dom-get-zindex'\nimport getClientRects from './utils/range-get-client-rects'\n\nimport $ from './utils/dom-render-svg'\nimport * as RENDERERS from './renderers'\n\nexport default function ({\n  debug = true,\n  ignore = '',\n  fonts = []\n} = {}) {\n  const cache = new Map()\n\n  // Init curried renderers\n  const renderers = {}\n  for (const k in RENDERERS) {\n    renderers[k] = RENDERERS[k]({ debug, fonts, cache })\n  }\n\n  return {\n    get cache () { return cache },\n\n    // Preload all fonts before resolving\n    preload: async function () {\n      for (const font of fonts) {\n        if (font.opentype) continue\n        font.opentype = await new Promise(resolve => {\n          Opentype.load(font.url, (error, font) => {\n            if (error) throw error\n            resolve(font)\n          })\n        })\n      }\n    },\n\n    // Clear cache and delete all resources\n    destroy: function () {\n      cache.clear()\n      for (const font of fonts) delete font.opentype\n    },\n\n    // Render the HTML container as a shadow SVG\n    render: async function (container, options = {}, transform) {\n      const viewBox = container.getBoundingClientRect()\n\n      // Create the SVG container\n      const svg = $('svg', {\n        viewBox: `0 0 ${viewBox.width} ${viewBox.height}`,\n        width: viewBox.width,\n        height: viewBox.height,\n        preserveAspectRatio: 'none'\n      })\n\n      // Set the parent to the current SVG.\n      // This parent will change during the walk\n      let parent = svg\n\n      // Render every children\n      await walk(container, async element => {\n        if (ignore && element !== container && element.matches(ignore)) return\n\n        const style = window.getComputedStyle(element)\n        const { x, y, width, height } = element.getBoundingClientRect()\n\n        if (element instanceof window.HTMLElement) {\n          // TODO opacity\n\n          // Handle CSS clip-path property\n          const clipPathValue = style.getPropertyValue('clip-path')\n          if (clipPathValue !== 'none') {\n            parent = $('g', null, svg)\n            // WARNING: CSS clip-path implementation is not done yet on arnaudjuracek/svg-to-pdf\n            parent.setAttribute('style', `clip-path: ${clipPathValue.replace(/\"/g, \"'\")}`)\n          }\n        }\n\n        // Render element\n        const render = renderers[element.tagName] ?? renderers.div\n        let rendered = await render(element, {\n          x: x - viewBox.x,\n          y: y - viewBox.y,\n          width,\n          height,\n          style\n        }, options)\n\n        if (transform) rendered = await transform(element, rendered)\n        if (rendered) parent.appendChild(rendered)\n\n        // Render text nodes inside the element\n        if (element.innerText && element.childNodes.length) {\n          const g = $('g', { class: 'text' })\n\n          for (const node of element.childNodes) {\n            if (node.nodeType !== Node.TEXT_NODE) continue\n            if (!node.textContent.length) continue\n\n            // Text interface does not provide a .innerText method, which would be\n            // more appropriate than textContent as it skips non-rendered whitespaces\n            // Splitting white-space leading Text trick the browser to recompute\n            // the layout itself, dealing with implicit space between adjacent nodes\n            if (/^\\s/.test(node.textContent)) {\n              node.splitText(1)\n              continue\n            }\n\n            for (const { rect, fragment } of getClientRects(node)) {\n              try {\n                let text = await renderers.text(fragment.textContent.trimEnd(), {\n                  x: rect.x - viewBox.x,\n                  y: rect.y - viewBox.y,\n                  width: rect.width,\n                  height: rect.height,\n                  style\n                }, options)\n\n                if (transform) text = await transform(element, text)\n                if (text) g.appendChild(text)\n              } catch (error) {\n                // TODO[improve] error handling\n                console.warn(new Error(`Rendering failed for the following text: '${fragment.textContent}'`, { cause: error }))\n                console.warn(error)\n              }\n            }\n          }\n\n          if (g.children.length) parent.appendChild(g)\n        }\n\n        // Continue walking\n        return true\n      }, {\n        sort: (a, b) => {\n          a.zIndex = a.zIndex ?? getZIndex(a)\n          b.zIndex = b.zIndex ?? getZIndex(b)\n          return a.zIndex - b.zIndex\n        }\n      })\n\n      return svg\n    }\n  }\n}\n","/* global DocumentFragment */\n\n// Return Range.clientRects with their corresponding DocumentFragment\nexport default function (node, text = node.innerText || node.textContent) {\n  const range = document.createRange()\n\n  const rects = []\n  for (let i = 0; i < node.length; i++) {\n    range.setStart(node, 0)\n    range.setEnd(node, (i + 1))\n\n    const clientRects = range.getClientRects()\n\n    const index = clientRects.length - 1\n    rects[index] = rects[index] ?? { text: '' }\n    rects[index].rect = clientRects[index]\n    rects[index].text += text.charAt(i)\n  }\n\n  return rects.map(rect => {\n    rect.fragment = new DocumentFragment()\n    rect.fragment.textContent = rect.text\n    return rect\n  })\n}\n"],"names":["_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","o","bind","v","then","observer","prototype","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","walk","element","_temp2","_ref$sort","sort","Promise","resolve","_callback","_temp","target","body","check","step","reject","_cycle","next","done","return","_fixup","TypeError","values","i","length","push","array","_forTo","_forOf","Array","from","children","child","getZIndex","el","zindex","window","getComputedStyle","getPropertyValue","parseInt","$","name","props","parent","NS","document","createElementNS","key","setAttributeNS","setAttribute","appendChild","isTransparent","color","startsWith","match","div","_ref","_ref2","x","y","width","height","style","backgroundColor","stroke","borderColor","_extends","fill","rx","svg","cache","_temp5","_ref3$rasterizeNested","rasterizeNestedSVG","_temp4","href","btoa","XMLSerializer","serializeToString","viewbox","innerHTML","_temp3","querySelectorAll","image","get","src","getAttribute","has","request","XMLHttpRequest","open","responseType","onload","response","send","blob","reader","FileReader","readAsDataURL","dataURL","set","debug","fonts","string","_ref3","_ref4","line","title","_ref5","_ref5$orientation","orientation","_ref5$stroke","x1","x2","y1","y2","class","g","font","find","_s$getPropertyValue","_s$getPropertyValue2","_s$getPropertyValue3","_ref$style","_ref$weight","weight","family","replace","Error","unitsPerEm","opentype","ascender","tables","hhea","descender","letterSpacing","fontSize","parseFloat","leading","Math","abs","textContent","toDataURL","_ref$debug","_ref$ignore","ignore","_ref$fonts","Map","renderers","k","RENDERERS","preload","Opentype","load","url","error","_Promise","destroy","clear","_iterator","_step","_createForOfIteratorHelperLoose","render","container","options","transform","viewBox","getBoundingClientRect","preserveAspectRatio","_renderers$element$ta","matches","_element$getBoundingC","HTMLElement","clipPathValue","tagName","rendered","_temp10","_temp8","innerText","childNodes","_temp7","_temp6","node","nodeType","Node","TEXT_NODE","test","text","range","createRange","rects","_rects$index","setStart","setEnd","clientRects","getClientRects","index","rect","charAt","map","fragment","DocumentFragment","recover","trimEnd","_transform2","_catch","console","warn","cause","splitText","_temp9","_transform","a","b","_a$zIndex","_b$zIndex","zIndex"],"mappings":"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"}